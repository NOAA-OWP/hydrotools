<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="evaluation_tools._restclient subpackage" href="evaluation_tools._restclient.html" /><link rel="prev" title="evaluation_tools.gcp_client.gcp module" href="evaluation_tools.gcp_client.gcp.html" />

    <meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>evaluation_tools.gcp_client.utils module - Evaluation Tools 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Evaluation Tools 1.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Evaluation Tools 1.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">API:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="evaluation_tools.nwis_client.html">evaluation_tools.nwis_client subpackage</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="evaluation_tools.gcp_client.html">evaluation_tools.gcp_client package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="evaluation_tools.gcp_client.gcp.html">evaluation_tools.gcp_client.gcp module</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">evaluation_tools.gcp_client.utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="evaluation_tools._restclient.html">evaluation_tools._restclient subpackage</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="evaluation_tools.metrics.html">evaluation_tools.metrics subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="evaluation_tools.metrics.metrics.html">evaluation_tools.metrics.metrics module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="evaluation_tools.events.event_detection.html">evaluation_tools.events.event_detection subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="evaluation_tools.events.event_detection.decomposition.html">evaluation_tools.events.event_detection.decomposition module</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-evaluation_tools.gcp_client.utils">
<span id="evaluation-tools-gcp-client-utils-module"></span><h1>evaluation_tools.gcp_client.utils module<a class="headerlink" href="#module-evaluation_tools.gcp_client.utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="google-cloud-platform-nwm-client">
<h2>Google Cloud Platform NWM Client<a class="headerlink" href="#google-cloud-platform-nwm-client" title="Permalink to this headline">¶</a></h2>
<p>This module provides methods for handling common model parameter files that can be
used in part with the other portions of this subpackage. One pragmatic use of this
module is to extract nhdPlus links associated with usgs sites to filter stations of
interest.</p>
<dl class="py function">
<dt id="evaluation_tools.gcp_client.utils.crosswalk">
<code class="sig-prename descclassname"><span class="pre">evaluation_tools.gcp_client.utils.</span></code><code class="sig-name descname"><span class="pre">crosswalk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">usgs_site_codes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nwm_feature_ids</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> → <span class="pre">pandas.core.frame.DataFrame</span><a class="headerlink" href="#evaluation_tools.gcp_client.utils.crosswalk" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the nwm_feature_id(s) OR usgs_site_codes for one or more provided
usgs_sites_codes or nwm_feature_ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>usgs_site_codes</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em><em>, </em><em>either usgs_site_codes</em><em> or </em><em>nwm_feature_ids</em>) – USGS site code as string, string seperated by commas, or list of strings</p></li>
<li><p><strong>nwm_feature_ids</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em><em>, </em><em>either usgs_site_codes</em><em> or </em><em>nwm_feature_ids</em>) – NWM feature id(s) as string, string seperated by commas, or list of strings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df of <cite>nwm_feature_id</cite> and <cite>usgs_site_code</cite> cols</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">evaluation_tools.gcp_client</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cribbs_creek</span> <span class="o">=</span> <span class="s2">"02465292"</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crx_walk</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">crosswalk</span><span class="p">(</span><span class="n">usgs_site_codes</span><span class="o">=</span><span class="n">cribbs_creek</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sites</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"02465292"</span><span class="p">,</span> <span class="s2">"04234000"</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crx_walk</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">crosswalk</span><span class="p">(</span><span class="n">usgs_site_codes</span><span class="o">=</span><span class="n">sites</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sites</span> <span class="o">=</span> <span class="s2">"02465292,04234000"</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crx_walk</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">crosswalk</span><span class="p">(</span><span class="n">usgs_site_codes</span><span class="o">=</span><span class="n">sites</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nwm_feature</span> <span class="o">=</span> <span class="mi">18206880</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crx_walk</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">crosswalk</span><span class="p">(</span><span class="n">nwm_feature_ids</span><span class="o">=</span><span class="n">nwm_feature</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py function">
<dt id="evaluation_tools.gcp_client.utils.nwm_routelink_extract_usgs_sites">
<code class="sig-prename descclassname"><span class="pre">evaluation_tools.gcp_client.utils.</span></code><code class="sig-name descname"><span class="pre">nwm_routelink_extract_usgs_sites</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">routelink_file_or_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> → <span class="pre">pandas.core.frame.DataFrame</span><a class="headerlink" href="#evaluation_tools.gcp_client.utils.nwm_routelink_extract_usgs_sites" title="Permalink to this definition">¶</a></dt>
<dd><p>From a NWM routelink file, extract nwm_feature_id’s that have associated USGS
NWIS Stations, returning a df with cols <cite>nwm_feature_id</cite> and <cite>usgs_site_code</cite>.</p>
<p>Routelink files can be obtained from nomads production server:
<a class="reference external" href="https://www.nco.ncep.noaa.gov/pmb/codes/nwprod/">https://www.nco.ncep.noaa.gov/pmb/codes/nwprod/</a></p>
<p>Under ./nwm.v*/parm/domain/RouteLink*.nc</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>routelink_file_or_url</strong> (<em>Union</em><em>[ </em><em>str</em><em>, </em><em>Path</em><em>, </em><em>]</em>) – NWM Routelink file containing channel parameters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with cols <cite>nwm_feature_id</cite> and <cite>usgs_site_code</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">evaluation_tools.gcp_client</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">nwm_routelink_extract_usgs_sites</span><span class="p">(</span><span class="s2">"RouteLink_NHDPLUS.nc"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"nwm_feature_id_with_usgs_site.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="evaluation_tools._restclient.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">evaluation_tools._restclient subpackage</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="evaluation_tools.gcp_client.gcp.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">evaluation_tools.gcp_client.gcp module</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Jason Regina and Austin Raney
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/evaluation_tools.gcp_client.utils.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">evaluation_tools.gcp_client.utils module</a><ul>
<li><a class="reference internal" href="#google-cloud-platform-nwm-client">Google Cloud Platform NWM Client</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>